<!DOCTYPE html>
<html lang="pt-br">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>AprendeOnline - Plataforma de Cursos Online</title>
    <link
      href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;700&display=swap"
      rel="stylesheet"
    />
    <script src="https://unpkg.com/react@17/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@17/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/babel-standalone@6/babel.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/4.3.2/socket.io.js"></script>
    
    <style>
      body {
        font-family: "Roboto", sans-serif;
        margin: 0;
        padding: 0;
        background-color: #f4f4f4;
        color: #333;
      }
      #root {
        max-width: 1200px;
        margin: 0 auto;
        padding: 20px;
      }
      .header {
        background-color: #2c3e50;
        color: white;
        padding: 20px;
        text-align: center;
        border-radius: 8px 8px 0 0;
      }
      .nav {
        background-color: #34495e;
        padding: 10px;
        border-radius: 0 0 8px 8px;
      }
      .nav ul {
        list-style-type: none;
        padding: 0;
        margin: 0;
        display: flex;
        justify-content: space-around;
      }
      .nav ul li a {
        color: white;
        text-decoration: none;
        padding: 5px 10px;
      }
      .content {
        background-color: white;
        padding: 20px;
        border-radius: 8px;
        margin-top: 20px;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
      }
      .course-list {
        display: grid;
        grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
        gap: 20px;
      }
      .course-card {
        background-color: #ecf0f1;
        border-radius: 8px;
        padding: 15px;
        transition: transform 0.3s ease;
      }
      .course-card:hover {
        transform: translateY(-5px);
      }
      .btn {
        background-color: #3498db;
        color: white;
        border: none;
        padding: 10px 15px;
        border-radius: 4px;
        cursor: pointer;
        transition: background-color 0.3s;
      }
      .btn:hover {
        background-color: #2980b9;
      }
      .chat-container {
        position: fixed;
        bottom: 20px;
        right: 20px;
        width: 300px;
        height: 400px;
        background-color: white;
        border-radius: 8px;
        box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
        display: flex;
        flex-direction: column;
      }
      .chat-messages {
        flex-grow: 1;
        overflow-y: auto;
        padding: 10px;
      }
      .chat-input {
        display: flex;
        padding: 10px;
      }
      .chat-input input {
        flex-grow: 1;
        margin-right: 10px;
      }
    </style>
  </head>

  <body>
    <div id="root"></div>

    <script type="text/babel">
      const { useState, useEffect } = React;

      // Simulando conexão com Socket.io para interações em tempo real
      const socket = io("https://aprendeonline.com.br");

      function App() {
        const [cursos, setCursos] = useState([]);
        const [usuario, setUsuario] = useState(null);
        const [mensagens, setMensagens] = useState([]);
        const [novaMensagem, setNovaMensagem] = useState("");

        useEffect(() => {
          // Simular carregamento de cursos
          setCursos([
            {
              id: 1,
              titulo: "Introdução à Programação",
              instrutor: "Ana Silva",
              modulos: 5,
            },
            {
              id: 2,
              titulo: "Marketing Digital",
              instrutor: "Carlos Santos",
              modulos: 8,
            },
            {
              id: 3,
              titulo: "Fotografia para Iniciantes",
              instrutor: "Julia Oliveira",
              modulos: 6,
            },
          ]);

          // Simular usuário logado
          setUsuario({ id: 1, nome: "João Aluno", tipo: "estudante" });

          // Ouvir novas mensagens
          socket.on("novaMensagem", (msg) => {
            setMensagens((mensagensAnteriores) => [
              ...mensagensAnteriores,
              msg,
            ]);
          });

          return () => {
            socket.off("novaMensagem");
          };
        }, []);

        const enviarMensagem = () => {
          if (novaMensagem.trim()) {
            const mensagem = {
              id: Date.now(),
              texto: novaMensagem,
              autor: usuario.nome,
              timestamp: new Date().toISOString(),
            };
            socket.emit("enviarMensagem", mensagem);
            setMensagens([...mensagens, mensagem]);
            setNovaMensagem("");
          }
        };

        return (
          <div>
            <header className="header">
              <h1>AprendeOnline</h1>
            </header>
            <nav className="nav">
              <ul>
                <li>
                  <a href="#cursos">Cursos</a>
                </li>
                <li>
                  <a href="#meuscursos">Meus Cursos</a>
                </li>
                <li>
                  <a href="#perfil">Perfil</a>
                </li>
              </ul>
            </nav>
            <main className="content">
              <h2>Cursos Disponíveis</h2>
              <div className="course-list">
                {cursos.map((curso) => (
                  <div key={curso.id} className="course-card">
                    <h3>{curso.titulo}</h3>
                    <p>Instrutor: {curso.instrutor}</p>
                    <p>Módulos: {curso.modulos}</p>
                    <button className="btn">Inscrever-se</button>
                  </div>
                ))}
              </div>
            </main>
            <div className="chat-container">
              <div className="chat-messages">
                {mensagens.map((msg) => (
                  <div key={msg.id}>
                    <strong>{msg.autor}:</strong> {msg.texto}
                  </div>
                ))}
              </div>
              <div className="chat-input">
                <input
                  type="text"
                  value={novaMensagem}
                  onChange={(e) => setNovaMensagem(e.target.value)}
                  placeholder="Digite sua mensagem..."
                />
                <button className="btn" onClick={enviarMensagem}>
                  Enviar
                </button>
              </div>
            </div>
          </div>
        );
      }

      ReactDOM.render(<App />, document.getElementById("root"));
    </script>

    <script>
      // Aqui iria o código do backend Node.js
      // Vamos comentar a estrutura e alguns exemplos

      /*
Estrutura do Backend (Node.js com Express e MongoDB):

1. Configurar servidor Express
2. Configurar conexão MongoDB
3. Configurar Socket.io para interações em tempo real
4. Criar modelos:
   - Usuário (estudante/instrutor)
   - Curso
   - Módulo
   - Aula
   - Avaliação

5. Criar rotas da API:
   - Autenticação (registro, login)
   - Gerenciamento de cursos (CRUD)
   - Inscrição em cursos
   - Gerenciamento de módulos e aulas
   - Sistema de avaliação

6. Implementar lógica de Socket.io para chat em tempo real

7. Exemplo de código:

const express = require('express');
const mongoose = require('mongoose');
const http = require('http');
const socketIo = require('socket.io');

const app = express();
const server = http.createServer(app);
const io = socketIo(server);

mongoose.connect('mongodb://localhost/aprendeonline', { useNewUrlParser: true, useUnifiedTopology: true });

const Usuario = mongoose.model('Usuario', {
  nome: String,
  email: String,
  tipo: String, // 'estudante' ou 'instrutor'
  senha: String // Lembre-se de hash a senha antes de salvar!
});

const Curso = mongoose.model('Curso', {
  titulo: String,
  instrutor: { type: mongoose.Schema.Types.ObjectId, ref: 'Usuario' },
  modulos: [{ type: mongoose.Schema.Types.ObjectId, ref: 'Modulo' }]
});

const Modulo = mongoose.model('Modulo', {
  titulo: String,
  aulas: [{ type: mongoose.Schema.Types.ObjectId, ref: 'Aula' }]
});

const Aula = mongoose.model('Aula', {
  titulo: String,
  conteudo: String,
  tipo: String // 'video', 'texto', etc.
});

const Avaliacao = mongoose.model('Avaliacao', {
  curso: { type: mongoose.Schema.Types.ObjectId, ref: 'Curso' },
  estudante: { type: mongoose.Schema.Types.ObjectId, ref: 'Usuario' },
  nota: Number,
  comentario: String
});

io.on('connection', (socket) => {
  console.log('Novo usuário conectado');

  socket.on('enviarMensagem', (mensagem) => {
    io.emit('novaMensagem', mensagem);
  });
});

app.use(express.json());

// Rota de exemplo para listar cursos
app.get('/api/cursos', async (req, res) => {
  try {
    const cursos = await Curso.find().populate('instrutor', 'nome');
    res.json(cursos);
  } catch (error) {
    res.status(500).json({ mensagem: 'Erro ao buscar cursos' });
  }
});

// Rota de exemplo para inscrição em um curso
app.post('/api/inscricao', async (req, res) => {
  const { cursoId, usuarioId } = req.body;
  try {
    const curso = await Curso.findById(cursoId);
    const usuario = await Usuario.findById(usuarioId);
    if (!curso || !usuario) {
      return res.status(404).json({ mensagem: 'Curso ou usuário não encontrado' });
    }
    // Lógica de inscrição aqui
    res.json({ mensagem: 'Inscrição realizada com sucesso' });
  } catch (error) {
    res.status(500).json({ mensagem: 'Erro ao processar inscrição' });
  }
});

// Adicionar mais rotas conforme necessário

const PORT = process.env.PORT || 3000;
server.listen(PORT, () => console.log(`Servidor rodando na porta ${PORT}`));
*/
    </script>
  </body>
</html>
